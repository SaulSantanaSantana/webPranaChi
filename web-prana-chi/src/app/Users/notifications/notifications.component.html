<app-navbar-secondary></app-navbar-secondary>
<section class="notifications">
    <div class="title">
        <img src="../../assets/notifications.png" class="icon">
        <h1>Notificaciones</h1>
    </div>
    <div class="adminview">
      <div class="filters">
        <input type="text" placeholder="Nombre" [(ngModel)]="namefilter" (change)="filter()">
        <select name="select" [(ngModel)]="marcFilter" (change)="filter()">
          <option value="Todas" selected>Todas</option>
          <option value="true">Leido</option>
          <option value="false">No Leido</option>
        </select>
      </div>
      @if(admin){
        <app-add-notification></app-add-notification>
      }
    </div>
    <hr>
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">Fecha</th>
            <th scope="col">Mensaje</th>
            <th scope="col">Usuario</th>
            <th scope="col">Leido</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
            @for (notification of notificationsFiltered; track $index) {
              <tr>
              <th>{{ convertirTimestamp(notification.Fecha) }}</th>
              <td>{{ notification.Mensaje }}</td>
              <td>{{ notification.Usuario }}</td>
              @if(notification.Usuario == "General"){
                <td> - </td>
              }
              @if(notification.Usuario != "General"){
                <td>{{ notification.Marcada ? "✔️" : "X"}}</td>
              }
              <td >
                <div class="actions">
                <button class="inconBtn"><app-notification-modal [notification]="notification"></app-notification-modal></button>
                @if(this.admin){
                  <button class="inconBtn"><img src="../../assets/delete.png" class="icon" (click)="deleteNotification(notification.id)"></button>
                }
              </div>
              </td>
            </tr>
            } 
        </tbody>
      </table>
    </div>
</section>